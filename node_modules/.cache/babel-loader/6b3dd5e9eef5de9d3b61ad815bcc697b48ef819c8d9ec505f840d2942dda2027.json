{"ast":null,"code":"import React from'react';import{useSelector,useDispatch}from'react-redux';import{Button,Dropdown,ButtonGroup}from'react-bootstrap';import{useTranslation}from'react-i18next';import{PlusSquare}from'react-bootstrap-icons';import cn from'classnames';import{selectors,actions,getCurrentChannel}from'../slices/Channels';import{selectors as messagesSelect}from'../slices/Messages.js';import MessagesComponent from'./Messages.jsx';import RenderMessageComponent from'./RenderMessages.jsx';import{actions as modalAction}from'../slices/Modals.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ChannelItem=_ref=>{let{handleChannel,channel,currentChannel,remove,rename,t}=_ref;return/*#__PURE__*/_jsx(\"li\",{className:\"nav-item w-100\",children:!channel.removable?/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>handleChannel(channel.id),className:cn('w-100','rounded-0','text-start','btn',{'btn-secondary':channel.id===currentChannel.id}),children:[/*#__PURE__*/_jsx(\"span\",{children:\"#\"}),' ',channel.name]}):/*#__PURE__*/_jsxs(Dropdown,{as:ButtonGroup,className:\"d-flex\",children:[/*#__PURE__*/_jsxs(Button,{type:\"button\",variant:channel.id===currentChannel.id&&'secondary',onClick:()=>handleChannel(channel.id),className:\"w-100 rounded-0 text-start text-truncate\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"me-1\",children:\"#\"}),channel.name]}),/*#__PURE__*/_jsx(Dropdown.Toggle,{split:true,variant:channel.id===currentChannel.id&&'secondary',id:\"dropdown-split-basic-\".concat(channel.id),children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:t('chatPage.channels.control')})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#\",onClick:()=>remove(channel.id),id:channel.id,children:t('chatPage.channels.remove')}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#\",onClick:()=>rename(channel.id),id:channel.id,children:t('chatPage.channels.rename')})]})]})},channel.id);};const ChannelsComponent=()=>{var _useSelector$find;const dispatch=useDispatch();const channels=useSelector(selectors.selectAll);const currentChannel=useSelector(getCurrentChannel);const{t}=useTranslation();const handleChannel=id=>{dispatch(actions.setChannelId(id));};const messagesMass=useSelector(messagesSelect.selectAll);const currentMessages=messagesMass.filter(message=>message.channelId===currentChannel.id);const currentChannelName=(_useSelector$find=useSelector(selectors.selectAll).find(_ref2=>{let{id}=_ref2;return id===currentChannel.id;}))===null||_useSelector$find===void 0?void 0:_useSelector$find.name;const addChannel=()=>{dispatch(modalAction.openModal({type:'add'}));};const removeChannel=id=>{dispatch(modalAction.openModal({type:'remove',id}));};const renameChannel=id=>{dispatch(modalAction.openModal({type:'rename',id}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4 col-md-2 border-end px-0 bg-light flex-column h-100 d-flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mt-1 justify-content-between mb-2 ps-4 pe-2 p-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:t('chatPage.channels.title')}),/*#__PURE__*/_jsxs(\"button\",{onClick:addChannel,type:\"button\",className:\"p-0 text-primary btn btn-group-vertical\",children:[/*#__PURE__*/_jsx(PlusSquare,{height:\"20\",width:\"20\"}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"+\"})]})]}),/*#__PURE__*/_jsx(\"ul\",{id:\"channels-box\",className:\"nav flex-column nav-pills nav-fill px-2 mb-3 overflow-auto h-100 d-block\",children:channels.map(channel=>/*#__PURE__*/_jsx(ChannelItem,{handleChannel:handleChannel,channel:channel,currentChannel:currentChannel,remove:removeChannel,rename:renameChannel,t:t},channel.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col p-0 h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light mb-4 p-3 shadow-sm small\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"m-0\",children:/*#__PURE__*/_jsx(\"b\",{children:\"# \".concat(currentChannelName)})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:t('chatPage.chat.message',{count:currentMessages.length})})]}),/*#__PURE__*/_jsx(RenderMessageComponent,{}),/*#__PURE__*/_jsx(MessagesComponent,{})]})})]});};export default ChannelsComponent;","map":{"version":3,"names":["React","useSelector","useDispatch","Button","Dropdown","ButtonGroup","useTranslation","PlusSquare","cn","selectors","actions","getCurrentChannel","messagesSelect","MessagesComponent","RenderMessageComponent","modalAction","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChannelItem","_ref","handleChannel","channel","currentChannel","remove","rename","t","className","children","removable","type","onClick","id","name","as","variant","Toggle","split","concat","Menu","Item","href","ChannelsComponent","_useSelector$find","dispatch","channels","selectAll","setChannelId","messagesMass","currentMessages","filter","message","channelId","currentChannelName","find","_ref2","addChannel","openModal","removeChannel","renameChannel","height","width","map","count","length"],"sources":["/home/jenmaru/hexletproject/frontend-project-12/frontend/src/components/Channels.jsx"],"sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Button, Dropdown, ButtonGroup } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { PlusSquare } from 'react-bootstrap-icons';\nimport cn from 'classnames';\nimport { selectors, actions, getCurrentChannel } from '../slices/Channels';\nimport { selectors as messagesSelect } from '../slices/Messages.js';\nimport MessagesComponent from './Messages.jsx';\nimport RenderMessageComponent from './RenderMessages.jsx';\nimport { actions as modalAction } from '../slices/Modals.js';\n\nconst ChannelItem = ({\n  handleChannel,\n  channel,\n  currentChannel,\n  remove,\n  rename,\n  t,\n}) => (\n  <li className=\"nav-item w-100\" key={channel.id}>\n    { !channel.removable\n      ? (\n        <button\n          type=\"button\"\n          onClick={() => handleChannel(channel.id)}\n          className={cn('w-100', 'rounded-0', 'text-start', 'btn', {\n            'btn-secondary': channel.id === currentChannel.id,\n          })}\n        >\n          <span>#</span>\n          {' '}\n          {channel.name}\n        </button>\n      )\n      : (\n        <Dropdown as={ButtonGroup} className=\"d-flex\">\n          <Button\n            type=\"button\"\n            variant={channel.id === currentChannel.id && 'secondary'}\n            onClick={() => handleChannel(channel.id)}\n            className=\"w-100 rounded-0 text-start text-truncate\"\n          >\n            <span className=\"me-1\">#</span>\n            {channel.name}\n          </Button>\n          <Dropdown.Toggle\n            split\n            variant={channel.id === currentChannel.id && 'secondary'}\n            id={`dropdown-split-basic-${channel.id}`}\n          >\n            <span className=\"visually-hidden\">{t('chatPage.channels.control')}</span>\n          </Dropdown.Toggle>\n          <Dropdown.Menu>\n            <Dropdown.Item\n              href=\"#\"\n              onClick={() => remove(channel.id)}\n              id={channel.id}\n            >\n              {t('chatPage.channels.remove')}\n            </Dropdown.Item>\n            <Dropdown.Item\n              href=\"#\"\n              onClick={() => rename(channel.id)}\n              id={channel.id}\n            >\n              {t('chatPage.channels.rename')}\n            </Dropdown.Item>\n          </Dropdown.Menu>\n        </Dropdown>\n      )}\n  </li>\n);\n\nconst ChannelsComponent = () => {\n  const dispatch = useDispatch();\n  const channels = useSelector(selectors.selectAll);\n  const currentChannel = useSelector(getCurrentChannel);\n  const { t } = useTranslation();\n  const handleChannel = (id) => {\n    dispatch(actions.setChannelId(id));\n  };\n  const messagesMass = useSelector(messagesSelect.selectAll);\n  const currentMessages = messagesMass.filter((message) => message.channelId === currentChannel.id);\n  const currentChannelName = useSelector(selectors.selectAll)\n    .find(({ id }) => id === currentChannel.id)\n    ?.name;\n\n  const addChannel = () => {\n    dispatch(modalAction.openModal({ type: 'add' }));\n  };\n  const removeChannel = (id) => {\n    dispatch(modalAction.openModal({ type: 'remove', id }));\n  };\n  const renameChannel = (id) => {\n    dispatch(modalAction.openModal({ type: 'rename', id }));\n  };\n\n  return (\n    <>\n      <div className=\"col-4 col-md-2 border-end px-0 bg-light flex-column h-100 d-flex\">\n        <div className=\"d-flex mt-1 justify-content-between mb-2 ps-4 pe-2 p-4\">\n          <b>{t('chatPage.channels.title')}</b>\n          <button onClick={addChannel} type=\"button\" className=\"p-0 text-primary btn btn-group-vertical\">\n            <PlusSquare height=\"20\" width=\"20\" />\n            <span className=\"visually-hidden\">+</span>\n          </button>\n        </div>\n        <ul id=\"channels-box\" className=\"nav flex-column nav-pills nav-fill px-2 mb-3 overflow-auto h-100 d-block\">\n          {channels.map((channel) => (\n            <ChannelItem\n              handleChannel={handleChannel}\n              key={channel.id}\n              channel={channel}\n              currentChannel={currentChannel}\n              remove={removeChannel}\n              rename={renameChannel}\n              t={t}\n            />\n          ))}\n        </ul>\n      </div>\n      <div className=\"col p-0 h-100\">\n        <div className=\"d-flex flex-column h-100\">\n          <div className=\"bg-light mb-4 p-3 shadow-sm small\">\n            <p className=\"m-0\">\n              <b>\n                {`# ${currentChannelName}`}\n              </b>\n            </p>\n            <span className=\"text-muted\">{t('chatPage.chat.message', { count: currentMessages.length })}</span>\n          </div>\n          <RenderMessageComponent />\n          <MessagesComponent />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ChannelsComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}