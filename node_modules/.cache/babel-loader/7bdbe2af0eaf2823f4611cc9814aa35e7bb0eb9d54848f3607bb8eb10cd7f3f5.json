{"ast":null,"code":"import React,{useState,useContext,useRef,useEffect}from'react';import{useSelector}from'react-redux';import{InputGroup,Form,Button}from'react-bootstrap';import{ArrowRightSquare}from'react-bootstrap-icons';import{useTranslation}from'react-i18next';import{useAuth}from'../contexts/authProvider.jsx';import{getCurrentChannel}from'../slices/Channels.js';import ChatContext from'../contexts/chatContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MessagesComponent=()=>{const{t}=useTranslation();const[text,setText]=useState('');const chatContext=useContext(ChatContext);const ref=useRef();const{sendNewMessage}=chatContext;const currentChannel=useSelector(getCurrentChannel);const auth=useAuth();const sendMessage=async()=>{const message={body:text,channelId:currentChannel.id,username:auth.user.username};await sendNewMessage(message);setText('');};useEffect(()=>{ref.current.focus();});return/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto px-5 py-3\",children:/*#__PURE__*/_jsx(Form,{className:\"py-1 border rounded-2\",novalidate:\"\",onSubmit:e=>{e.preventDefault();sendMessage();},children:/*#__PURE__*/_jsxs(InputGroup,{className:\"has-validation\",children:[/*#__PURE__*/_jsx(Form.Control,{name:\"body\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435...\",value:text,onChange:e=>setText(e.target.value),\"aria-label\":\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",className:\"border-0 p-0 ps-2\",noValidate:\"\",ref:ref}),/*#__PURE__*/_jsxs(Button,{variant:\"group-vertical btn-light\",type:\"submit\",disabled:text==='',children:[/*#__PURE__*/_jsx(ArrowRightSquare,{width:\"20\",height:\"20\"}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:t('charPage.chat.send')})]})]})})});};export default MessagesComponent;","map":{"version":3,"names":["React","useState","useContext","useRef","useEffect","useSelector","InputGroup","Form","Button","ArrowRightSquare","useTranslation","useAuth","getCurrentChannel","ChatContext","jsx","_jsx","jsxs","_jsxs","MessagesComponent","t","text","setText","chatContext","ref","sendNewMessage","currentChannel","auth","sendMessage","message","body","channelId","id","username","user","current","focus","className","children","novalidate","onSubmit","e","preventDefault","Control","name","placeholder","value","onChange","target","noValidate","variant","type","disabled","width","height"],"sources":["/home/jenmaru/hexletproject/frontend-project-12/frontend/src/components/messagesComponent.jsx"],"sourcesContent":["import React, {\n  useState, useContext, useRef, useEffect,\n} from 'react';\nimport { useSelector } from 'react-redux';\nimport { InputGroup, Form, Button } from 'react-bootstrap';\nimport { ArrowRightSquare } from 'react-bootstrap-icons';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/authProvider.jsx';\nimport { getCurrentChannel } from '../slices/Channels.js';\nimport ChatContext from '../contexts/chatContext';\n\nconst MessagesComponent = () => {\n  const { t } = useTranslation();\n  const [text, setText] = useState('');\n  const chatContext = useContext(ChatContext);\n  const ref = useRef();\n  const { sendNewMessage } = chatContext;\n  const currentChannel = useSelector(getCurrentChannel);\n  const auth = useAuth();\n\n  const sendMessage = async () => {\n    const message = {\n      body: text,\n      channelId: currentChannel.id,\n      username: auth.user.username,\n    };\n    await sendNewMessage(message);\n    setText('');\n  };\n\n  useEffect(() => {\n    ref.current.focus();\n  });\n\n  return (\n    <div className=\"mt-auto px-5 py-3\">\n      <Form\n        className=\"py-1 border rounded-2\"\n        novalidate=\"\"\n        onSubmit={(e) => {\n          e.preventDefault();\n          sendMessage();\n        }}\n      >\n        <InputGroup className=\"has-validation\">\n          <Form.Control\n            name=\"body\"\n            placeholder=\"Введите сообщение...\"\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            aria-label=\"Новое сообщение\"\n            className=\"border-0 p-0 ps-2\"\n            noValidate=\"\"\n            ref={ref}\n          />\n          <Button variant=\"group-vertical btn-light\" type=\"submit\" disabled={text === ''}>\n            <ArrowRightSquare width=\"20\" height=\"20\" />\n            <span className=\"visually-hidden\">\n              {t('charPage.chat.send')}\n            </span>\n          </Button>\n        </InputGroup>\n      </Form>\n    </div>\n  );\n};\n\nexport default MessagesComponent;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EACVC,QAAQ,CAAEC,UAAU,CAAEC,MAAM,CAAEC,SAAS,KAClC,OAAO,CACd,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,UAAU,CAAEC,IAAI,CAAEC,MAAM,KAAQ,iBAAiB,CAC1D,OAASC,gBAAgB,KAAQ,uBAAuB,CACxD,OAASC,cAAc,KAAQ,eAAe,CAC9C,OAASC,OAAO,KAAQ,8BAA8B,CACtD,OAASC,iBAAiB,KAAQ,uBAAuB,CACzD,MAAO,CAAAC,WAAW,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElD,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAEC,CAAE,CAAC,CAAGT,cAAc,CAAC,CAAC,CAC9B,KAAM,CAACU,IAAI,CAAEC,OAAO,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAAqB,WAAW,CAAGpB,UAAU,CAACW,WAAW,CAAC,CAC3C,KAAM,CAAAU,GAAG,CAAGpB,MAAM,CAAC,CAAC,CACpB,KAAM,CAAEqB,cAAe,CAAC,CAAGF,WAAW,CACtC,KAAM,CAAAG,cAAc,CAAGpB,WAAW,CAACO,iBAAiB,CAAC,CACrD,KAAM,CAAAc,IAAI,CAAGf,OAAO,CAAC,CAAC,CAEtB,KAAM,CAAAgB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,OAAO,CAAG,CACdC,IAAI,CAAET,IAAI,CACVU,SAAS,CAAEL,cAAc,CAACM,EAAE,CAC5BC,QAAQ,CAAEN,IAAI,CAACO,IAAI,CAACD,QACtB,CAAC,CACD,KAAM,CAAAR,cAAc,CAACI,OAAO,CAAC,CAC7BP,OAAO,CAAC,EAAE,CAAC,CACb,CAAC,CAEDjB,SAAS,CAAC,IAAM,CACdmB,GAAG,CAACW,OAAO,CAACC,KAAK,CAAC,CAAC,CACrB,CAAC,CAAC,CAEF,mBACEpB,IAAA,QAAKqB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCtB,IAAA,CAACR,IAAI,EACH6B,SAAS,CAAC,uBAAuB,CACjCE,UAAU,CAAC,EAAE,CACbC,QAAQ,CAAGC,CAAC,EAAK,CACfA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBd,WAAW,CAAC,CAAC,CACf,CAAE,CAAAU,QAAA,cAEFpB,KAAA,CAACX,UAAU,EAAC8B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eACpCtB,IAAA,CAACR,IAAI,CAACmC,OAAO,EACXC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,sGAAsB,CAClCC,KAAK,CAAEzB,IAAK,CACZ0B,QAAQ,CAAGN,CAAC,EAAKnB,OAAO,CAACmB,CAAC,CAACO,MAAM,CAACF,KAAK,CAAE,CACzC,aAAW,uFAAiB,CAC5BT,SAAS,CAAC,mBAAmB,CAC7BY,UAAU,CAAC,EAAE,CACbzB,GAAG,CAAEA,GAAI,CACV,CAAC,cACFN,KAAA,CAACT,MAAM,EAACyC,OAAO,CAAC,0BAA0B,CAACC,IAAI,CAAC,QAAQ,CAACC,QAAQ,CAAE/B,IAAI,GAAK,EAAG,CAAAiB,QAAA,eAC7EtB,IAAA,CAACN,gBAAgB,EAAC2C,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAAE,CAAC,cAC3CtC,IAAA,SAAMqB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC9BlB,CAAC,CAAC,oBAAoB,CAAC,CACpB,CAAC,EACD,CAAC,EACC,CAAC,CACT,CAAC,CACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAD,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}