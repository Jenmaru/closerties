{"ast":null,"code":"import axios from'axios';import React,{useEffect}from'react';import{useDispatch}from'react-redux';import{useTranslation}from'react-i18next';import{ToastContainer,toast}from'react-toastify';import{actions as channelsAction}from'../slices/Channels.js';import routes from'../routes.js';import Header from'../components/header.jsx';import ChannelsComponent from'../components/channelsComponent.jsx';import{useAuth}from'../contexts/authProvider.jsx';import{actions as messagesAction}from'../slices/Messages.js';import ModalComponent from'../components/modalComponent.jsx';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ChatPage=()=>{const auth=useAuth();const dispatch=useDispatch();const{t}=useTranslation();useEffect(()=>{const getResponse=async()=>{try{const{data}=await axios.get(routes.usersPath(),{headers:auth.getAuth()});const{channels,messages,currentChannelId}=data;dispatch(channelsAction.addChannels(channels));dispatch(messagesAction.addMessages(messages));dispatch(channelsAction.setChannelId(currentChannelId));}catch(e){auth.logOut();toast.error(t('toast.networkError'),{toastId:\"\".concat(t('toast.networkError'),\" error\")});}};getResponse();},[auth,dispatch,t]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column h-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container h-100 my-4 overflow-hidden rounded shadow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row h-100 bg-white flex-md-row\",children:/*#__PURE__*/_jsx(ChannelsComponent,{})})})]}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:5000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true,theme:\"light\"}),/*#__PURE__*/_jsx(ModalComponent,{})]});};export default ChatPage;","map":{"version":3,"names":["axios","React","useEffect","useDispatch","useTranslation","ToastContainer","toast","actions","channelsAction","routes","Header","ChannelsComponent","useAuth","messagesAction","ModalComponent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatPage","auth","dispatch","t","getResponse","data","get","usersPath","headers","getAuth","channels","messages","currentChannelId","addChannels","addMessages","setChannelId","e","logOut","error","toastId","concat","children","className","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme"],"sources":["/home/jenmaru/hexletproject/frontend-project-12/frontend/src/pages/chatPage.jsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { actions as channelsAction } from '../slices/Channels.js';\nimport routes from '../routes.js';\nimport Header from '../components/header.jsx';\nimport ChannelsComponent from '../components/channelsComponent.jsx';\nimport { useAuth } from '../contexts/authProvider.jsx';\nimport { actions as messagesAction } from '../slices/Messages.js';\nimport ModalComponent from '../components/modalComponent.jsx';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst ChatPage = () => {\n  const auth = useAuth();\n  const dispatch = useDispatch();\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const getResponse = async () => {\n      try {\n        const { data } = await axios.get(routes.usersPath(), {\n          headers: auth.getAuth(),\n        });\n        const { channels, messages, currentChannelId } = data;\n        dispatch(channelsAction.addChannels(channels));\n        dispatch(messagesAction.addMessages(messages));\n        dispatch(channelsAction.setChannelId(currentChannelId));\n      } catch (e) {\n        auth.logOut();\n        toast.error(t('toast.networkError'), { toastId: `${t('toast.networkError')} error` });\n      }\n    };\n    getResponse();\n  }, [auth, dispatch, t]);\n\n  return (\n    <>\n      <div className=\"d-flex flex-column h-100\">\n        <Header />\n        <div className=\"container h-100 my-4 overflow-hidden rounded shadow\">\n          <div className=\"row h-100 bg-white flex-md-row\">\n            <ChannelsComponent />\n          </div>\n        </div>\n      </div>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        draggable\n        pauseOnHover\n        theme=\"light\"\n      />\n      <ModalComponent />\n    </>\n  );\n};\n\nexport default ChatPage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,cAAc,KAAQ,eAAe,CAC9C,OAASC,cAAc,CAAEC,KAAK,KAAQ,gBAAgB,CACtD,OAASC,OAAO,GAAI,CAAAC,cAAc,KAAQ,uBAAuB,CACjE,MAAO,CAAAC,MAAM,KAAM,cAAc,CACjC,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAC7C,MAAO,CAAAC,iBAAiB,KAAM,qCAAqC,CACnE,OAASC,OAAO,KAAQ,8BAA8B,CACtD,OAASL,OAAO,GAAI,CAAAM,cAAc,KAAQ,uBAAuB,CACjE,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,MAAO,uCAAuC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE/C,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,IAAI,CAAGV,OAAO,CAAC,CAAC,CACtB,KAAM,CAAAW,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEqB,CAAE,CAAC,CAAGpB,cAAc,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAA1B,KAAK,CAAC2B,GAAG,CAAClB,MAAM,CAACmB,SAAS,CAAC,CAAC,CAAE,CACnDC,OAAO,CAAEP,IAAI,CAACQ,OAAO,CAAC,CACxB,CAAC,CAAC,CACF,KAAM,CAAEC,QAAQ,CAAEC,QAAQ,CAAEC,gBAAiB,CAAC,CAAGP,IAAI,CACrDH,QAAQ,CAACf,cAAc,CAAC0B,WAAW,CAACH,QAAQ,CAAC,CAAC,CAC9CR,QAAQ,CAACV,cAAc,CAACsB,WAAW,CAACH,QAAQ,CAAC,CAAC,CAC9CT,QAAQ,CAACf,cAAc,CAAC4B,YAAY,CAACH,gBAAgB,CAAC,CAAC,CACzD,CAAE,MAAOI,CAAC,CAAE,CACVf,IAAI,CAACgB,MAAM,CAAC,CAAC,CACbhC,KAAK,CAACiC,KAAK,CAACf,CAAC,CAAC,oBAAoB,CAAC,CAAE,CAAEgB,OAAO,IAAAC,MAAA,CAAKjB,CAAC,CAAC,oBAAoB,CAAC,UAAS,CAAC,CAAC,CACvF,CACF,CAAC,CACDC,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACH,IAAI,CAAEC,QAAQ,CAAEC,CAAC,CAAC,CAAC,CAEvB,mBACEN,KAAA,CAAAE,SAAA,EAAAsB,QAAA,eACExB,KAAA,QAAKyB,SAAS,CAAC,0BAA0B,CAAAD,QAAA,eACvC1B,IAAA,CAACN,MAAM,GAAE,CAAC,cACVM,IAAA,QAAK2B,SAAS,CAAC,qDAAqD,CAAAD,QAAA,cAClE1B,IAAA,QAAK2B,SAAS,CAAC,gCAAgC,CAAAD,QAAA,cAC7C1B,IAAA,CAACL,iBAAiB,GAAE,CAAC,CAClB,CAAC,CACH,CAAC,EACH,CAAC,cACNK,IAAA,CAACX,cAAc,EACbuC,QAAQ,CAAC,WAAW,CACpBC,SAAS,CAAE,IAAK,CAChBC,eAAe,CAAE,KAAM,CACvBC,WAAW,CAAE,KAAM,CACnBC,YAAY,MACZC,GAAG,CAAE,KAAM,CACXC,gBAAgB,MAChBC,SAAS,MACTC,YAAY,MACZC,KAAK,CAAC,OAAO,CACd,CAAC,cACFrC,IAAA,CAACF,cAAc,GAAE,CAAC,EAClB,CAAC,CAEP,CAAC,CAED,cAAe,CAAAO,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}