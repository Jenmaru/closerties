{"version":3,"file":"browser.umd.js","sources":["../src/constants.js","../node_modules/tiny-invariant/dist/tiny-invariant.esm.js","../src/history-context.js","../src/utils.js","../src/provider.js","../src/error-boundary.js","../src/rollbar-context.js","../src/hooks/use-rollbar.js","../src/hooks/use-rollbar-config.js","../src/hooks/use-rollbar-context.js","../src/hooks/use-rollbar-person.js","../src/hooks/use-rollbar-capture-event.js"],"sourcesContent":["export const LEVEL_DEBUG = 'debug';\nexport const LEVEL_INFO = 'info';\nexport const LEVEL_WARN = 'warn';\nexport const LEVEL_ERROR = 'error';\nexport const LEVEL_CRITICAL = 'critical';\n\nexport default {\n  [LEVEL_DEBUG]: 1,\n  [LEVEL_INFO]: 2,\n  [LEVEL_WARN]: 3,\n  [LEVEL_ERROR]: 4,\n  [LEVEL_CRITICAL]: 5,\n}\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    var provided = typeof message === 'function' ? message() : message;\n    var value = provided ? prefix + \": \" + provided : prefix;\n    throw new Error(value);\n}\n\nexport { invariant as default };\n","import Rollbar from 'rollbar';\nimport invariant from 'tiny-invariant';\n\nexport function historyContext(rollbar, { formatter, filter } = {}) {\n  invariant(rollbar instanceof Rollbar, 'historyContext must have an instance of Rollbar');\n  invariant(formatter == null || typeof formatter === 'function', `formatter option must be a function, received ${typeof formatter} instead`);\n  invariant(filter == null || typeof filter === 'function', `filter option must be a function, received ${typeof filter} instead`);\n  // v4 of history.listen callback signature is (location, action)\n  // v5 of history.listen callback signature is ({ location, action })\n  // this implementation translates it to work for both\n  return (v4location, v4action) => {\n    let  { action, location } = v4location;\n    if (v4action) {\n      action = v4action;\n      location = v4location;\n    }\n    if (filter && !filter(location, action)) {\n      return;\n    }\n    const context = formatter ? formatter(location, action) : location.pathname;\n    invariant(typeof context === 'string', 'formatter must return a string value to set the context');\n    rollbar.configure({ payload: { context }});\n  }\n}\n","import * as constants from './constants';\n\nconst VALID_LEVELS = constants.default;\n\nexport function value(val, defaultTo, ...args) {\n  if (typeof val === 'function') {\n    return val(...args);\n  }\n  return val;\n}\n\nexport function wrapValue(val, defaultAs) {\n  return (defaultTo, ...args) => value(val, defaultAs === undefined ? defaultTo : defaultAs, ...args);\n}\n\nexport function isValidLevel(level) {\n  return VALID_LEVELS[level] >= VALID_LEVELS[constants.LEVEL_DEBUG]\n    && VALID_LEVELS[level] <= VALID_LEVELS[constants.LEVEL_CRITICAL];\n}\n\nexport function isRollbarInstance(instance) {\n  return !!instance?.options?.accessToken;\n}\n","import React, { Component, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Rollbar from 'rollbar';\nimport invariant from 'tiny-invariant';\nimport { isRollbarInstance } from './utils';\n\nexport const Context = createContext();\nContext.displayName = 'Rollbar';\n\nexport const RollbarInstance = Symbol('RollbarInstance');\nexport const BaseOptions = Symbol('BaseOptions');\nexport const RollbarCtor = Symbol('RollbarCtor');\n\nexport function getRollbarFromContext(context) {\n  const { [RollbarInstance]: rollbar } = context;\n  return rollbar;\n}\n\nexport function getRollbarConstructorFromContext(context) {\n  const { [RollbarCtor]: ctor } = context;\n  return ctor;\n}\n\nexport class Provider extends Component {\n  static propTypes = {\n    Rollbar: PropTypes.func,\n    config: (props, propName, componentName) => {\n      if (!props.config && !props.instance) {\n        return new Error(`One of the required props 'config' or 'instance' must be set for ${componentName}.`)\n      }\n      if (props.config) {\n        const configType = typeof props.config;\n        if (configType === 'function' || configType === 'object' && !Array.isArray(configType)) {\n          return;\n        }\n        return new Error(`${propName} must be either an Object or a Function`);\n      }\n    },\n    instance: (props, propName, componentName) => {\n      if (!props.config && !props.instance) {\n        return new Error(`One of the required props 'config' or 'instance' must be set for ${componentName}.`)\n      }\n      if (props.instance && !isRollbarInstance(props.instance)) {\n        return new Error(`${propName} must be a configured instance of Rollbar`);\n      }\n    },\n    children: PropTypes.node\n  }\n\n  constructor(props) {\n    super(props);\n    const { config, Rollbar: ctor = Rollbar, instance } = this.props;\n    invariant(\n      !instance || isRollbarInstance(instance),\n      '`instance` must be a configured instance of Rollbar'\n    );\n    const options = typeof config === 'function' ? config() : config;\n    const rollbar = instance || new ctor(options);\n    // TODO: use isUncaught to filter if this is 2nd Provider added\n    // unless customer wants that\n    this.state = { rollbar, options };\n  }\n\n\n\n  // componentDidUpdate()\n\n  render() {\n    const { children, Rollbar: ctor = Rollbar } = this.props;\n    const { rollbar, options } = this.state;\n\n    return (\n      <Context.Provider value={{ [RollbarInstance]: rollbar, [BaseOptions]: options, [RollbarCtor]: ctor }}>\n        {children}\n      </Context.Provider>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport invariant from 'tiny-invariant';\nimport { LEVEL_ERROR } from './constants';\nimport { Context, getRollbarFromContext } from './provider';\nimport * as utils from './utils';\n\nconst INITIAL_ERROR_STATE = { hasError: false, error: null };\n\nexport class ErrorBoundary extends Component {\n  static contextType = Context;\n\n  static propTypes = {\n    fallbackUI: PropTypes.elementType,\n    errorMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    extra: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n    level: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    callback: PropTypes.func,\n    children: PropTypes.node,\n  }\n\n  static defaultProps = {\n    level: LEVEL_ERROR,\n  }\n\n  constructor(props) {\n    super(props);\n    invariant(utils.isValidLevel(props.level), `${props.level} is not a valid level setting for Rollbar`);\n    this.state = { ...INITIAL_ERROR_STATE };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, info) {\n    const { errorMessage, extra, level: targetLevel, callback } = this.props;\n    const custom = utils.value(extra, {}, error, info);\n    const data = { ...info, ...custom };\n    const level = utils.value(targetLevel, LEVEL_ERROR, error, info);\n    const rollbar = getRollbarFromContext(this.context);\n    if (!errorMessage) {\n      rollbar[level](error, data, callback);\n    } else {\n      let logMessage = utils.value(errorMessage, '', error, info);\n      rollbar[level](logMessage, error, data, callback);\n    }\n  }\n\n  resetError = () => {\n    this.setState(INITIAL_ERROR_STATE);\n  }\n\n  render() {\n    const { hasError, error } = this.state;\n    const { fallbackUI: FallbackUI, children } = this.props;\n\n    if (!hasError) {\n      return children;\n    }\n\n    if (!FallbackUI) {\n      return null;\n    }\n\n    return <FallbackUI error={error} resetError={this.resetError} />;\n  }\n}\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Context, getRollbarFromContext } from './provider';\n\nexport class RollbarContext extends Component {\n  static propTypes = {\n    context: PropTypes.string.isRequired,\n    onRender: PropTypes.bool,\n    children: PropTypes.node,\n  }\n\n  static defaultProps = {\n    onRender: false,\n  }\n\n  static contextType = Context;\n\n  firstRender = true;\n\n  constructor(props) {\n    super(props);\n    this.state = { previousContext: null };\n  }\n\n  changeContext = (storePrevious = true) => {\n    const rollbar = getRollbarFromContext(this.context);\n    const { context } = this.props;\n    if (storePrevious) {\n      this.setState({ previousContext: rollbar.options.payload.context });\n    }\n    rollbar.configure({ payload: { context }});\n  }\n\n  componentDidMount() {\n    const { onRender } = this.props;\n    if (!onRender) {\n      this.changeContext(true);\n    }\n  }\n\n  componentDidUpdate() {\n    const { onRender } = this.props;\n    if (!onRender) {\n      this.changeContext(false);\n    }\n  }\n\n  componentWillUnmount() {\n    const rollbar = getRollbarFromContext(this.context);\n    const { previousContext } = this.state;\n    rollbar.configure({ payload: { context: previousContext }});\n  }\n\n  render() {\n    const { onRender } = this.props;\n    if (onRender && this.firstRender) {\n      this.changeContext(true);\n    }\n    this.firstRender = false;\n    return this.props.children;\n  }\n}\n","import { useContext } from 'react';\nimport { Context, getRollbarFromContext } from '../provider';\n\nexport function useRollbar() {\n  const context = useContext(Context);\n  return getRollbarFromContext(context);\n}\n","import { useRollbar } from './use-rollbar';\n\nexport function useRollbarConfiguration(config) {\n  const rollbar = useRollbar();\n  rollbar.configure(config);\n}\n","import invariant from 'tiny-invariant';\nimport { useEffect, useLayoutEffect } from 'react';\nimport { useRollbar } from './use-rollbar';\n\n// Simple version does its job\n// export function useRollbarContext(context) {\n//   useRollbarConfiguration({ payload: { context }});\n// }\n\n// Complex version will set the context when part of the tree and reset back to original context when removed\nexport function useRollbarContext(ctx = '', isLayout = false) {\n  invariant(typeof ctx === 'string', '`ctx` must be a string');\n  const rollbar = useRollbar();\n  (isLayout ? useLayoutEffect : useEffect)(() => {\n    const origCtx = rollbar.options.payload.context;\n    rollbar.configure({ payload: { context: ctx }});\n    return () => {\n      rollbar.configure({ payload: { context: origCtx }});\n    };\n  }, [ctx]);\n}\n","import { useRollbarConfiguration } from './use-rollbar-config';\n\nexport function useRollbarPerson(person) {\n  useRollbarConfiguration({ payload: { person }});\n}\n","import { useEffect } from 'react';\nimport invariant from 'tiny-invariant';\nimport { LEVEL_INFO } from '../constants';\nimport { useRollbar } from './use-rollbar';\nimport { isValidLevel } from '../utils';\n\nexport function useRollbarCaptureEvent(metadata, level = LEVEL_INFO) {\n  invariant(isValidLevel(level), `${level} is not a valid level setting for Rollbar`);\n  const rollbar = useRollbar();\n  useEffect(() => {\n    rollbar.captureEvent(metadata, level);\n  }, [metadata, level, rollbar]);\n}\n"],"names":["LEVEL_DEBUG","LEVEL_INFO","LEVEL_WARN","LEVEL_ERROR","LEVEL_CRITICAL","historyContext","rollbar","formatter","filter","invariant","Rollbar","v4location","v4action","action","location","context","pathname","configure","payload","VALID_LEVELS","constants","value","val","defaultTo","args","isValidLevel","level","isRollbarInstance","instance","options","accessToken","Context","createContext","displayName","RollbarInstance","Symbol","BaseOptions","RollbarCtor","getRollbarFromContext","Provider","props","config","ctor","state","children","React","Component","PropTypes","func","propName","componentName","Error","configType","Array","isArray","node","INITIAL_ERROR_STATE","hasError","error","ErrorBoundary","setState","utils","info","errorMessage","extra","targetLevel","callback","custom","data","logMessage","FallbackUI","fallbackUI","resetError","elementType","oneOfType","string","object","RollbarContext","storePrevious","previousContext","onRender","changeContext","firstRender","isRequired","bool","useRollbar","useContext","useRollbarConfiguration","useRollbarContext","ctx","isLayout","useLayoutEffect","useEffect","origCtx","useRollbarPerson","person","useRollbarCaptureEvent","metadata","captureEvent"],"mappings":"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"}